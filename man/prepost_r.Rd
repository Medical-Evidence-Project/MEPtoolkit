% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/prepost_r.R
\name{prepost_r}
\alias{prepost_r}
\alias{prepost_r_RIVETS}
\title{Compute a paired (pre–post) correlation from summary statistics}
\usage{
prepost_r(
  s1,
  s2,
  sc = NULL,
  mc = NULL,
  m1 = NULL,
  m2 = NULL,
  n = NULL,
  t = NULL,
  p = NULL,
  data = NULL,
  append = FALSE,
  out_col_min = "rho_prepost_min",
  out_col_mid = "rho_prepost",
  out_col_max = "rho_prepost_max",
  strict = FALSE,
  warn = TRUE
)

prepost_r_RIVETS(
  s1,
  s2,
  sc = NULL,
  mc = NULL,
  m1 = NULL,
  m2 = NULL,
  n = NULL,
  t = NULL,
  p = NULL,
  data = NULL,
  append = FALSE,
  out_col = "rho_prepost",
  strict = FALSE,
  warn = TRUE
)
}
\arguments{
\item{s1, s2}{Character vectors or column names. SD at pre and post. \strong{Must be character} in `prepost_r()` to infer rounding. Numeric allowed in `_RIVET`.}

\item{sc}{Character or column name. SD of change (if supplied). Character in `prepost_r()`; numeric allowed in `_RIVET`.}

\item{mc}{Character or column name. Mean change \eqn{(m_2 - m_1)}. If `NULL` and both `m1` and `m2` are supplied, it’s computed row-wise.}

\item{m1, m2}{Character or column names. Means at pre and post (used for `mc` and/or deriving `sc`). Character in `prepost_r()`; numeric allowed in `_RIVET`.}

\item{n}{Numeric/integer or column name. Paired sample size (treated as exact).}

\item{t}{Character or column name. Paired \emph{t} statistic (used when `sc` missing). Character in `prepost_r()`; numeric allowed in `_RIVET`.}

\item{p}{Character or column name. Two-sided \emph{p} (used when `sc` and `t` missing). Character in `prepost_r()`; numeric allowed in `_RIVET`.}

\item{data}{Optional `data.frame`. If provided, arguments are evaluated within it.}

\item{append}{Logical. If `TRUE` with `data`, append output columns; else return a data frame of results.}

\item{out_col_min, out_col_mid, out_col_max}{Character. Output column names when `append = TRUE`
(defaults: `"rho_prepost_min"`, `"rho_prepost"`, `"rho_prepost_max"`).}

\item{strict}{Logical. If `TRUE`, error out on underspecified rows; else return `NA` (default `FALSE`).}

\item{warn}{Logical. Warn about underspecified rows when `strict = FALSE` (default `TRUE`).}

\item{out_col}{(legacy, `_RIVET` only) Character. Single output column name (default `"rho_prepost"`).}
}
\value{
- `prepost_r()`: If `append = FALSE`, a data frame with three columns:
  `rho_prepost_min`, `rho_prepost`, `rho_prepost_max`. If `append = TRUE` and `data` is given,
  returns `data` with those columns appended.
- `prepost_r_RIVETS()`: A numeric vector (or appended single column) of point estimates.
}
\description{
`prepost_r()` computes \emph{bounds} on the paired correlation (pre vs. post)
attributable to rounding in the reported summary statistics, and also returns
the RIVET point estimate at the reported numbers. It accepts SD of change
directly or derives it from a paired \emph{t} or two-sided \emph{p} plus mean change and
sample size. Character inputs (e.g., `"37.74"`) allow the function to infer
rounding half-ULPs from the number of decimals.

`prepost_r_RIVETS()` provides the legacy single-point estimate (no rounding
bounds). Both functions share this help page.
}
\details{
Correlation formula:
\deqn{r = \frac{s_1^2 + s_2^2 - s_c^2}{2 s_1 s_2}.}
If \eqn{s_c} is missing, it is derived per row (priority \strong{sc > t > p}):
\itemize{
  \item From paired \eqn{t}: \eqn{s_c = m_c \sqrt{n}/t}.
  \item From two-sided paired \eqn{p}: \eqn{t = |qt(p/2, \nu=n-1, lower.tail=FALSE)|}, then \eqn{s_c = m_c \sqrt{n}/t}.
}

\strong{Rounding model (for `prepost_r()`):}
A character value with \eqn{d} decimals is taken to represent an interval
\eqn{\pm 0.5 \times 10^{-d}} around the reported number. We propagate these
intervals to obtain \code{rho_prepost_min} (worst case: large \code{sc}, corner
\code{s1}/\code{s2}) and \code{rho_prepost_max} (best case: small \code{sc}, corner
\code{s1}/\code{s2}). We also report the point estimate \code{rho_prepost} at
the reported numbers (RIVET).

\emph{Vectorization & recycling.} Inputs are evaluated per row. Length-1 inputs
recycle; other mismatches error. With `data`, arguments can be bare or quoted
column names.

\emph{Handling incomplete rows.} With `strict = FALSE` (default), rows lacking
sufficient information yield `NA` (and optionally warn). With `strict = TRUE`,
the function errors and lists offending rows.

\emph{Append behavior.} If `append = TRUE` and `data` is supplied, the function
returns `data` with three new columns (defaults: `"rho_prepost_min"`,
`"rho_prepost"`, `"rho_prepost_max"`); otherwise it returns a 3-column data frame.
}
\examples{
df <- data.frame(
  m1 = c("140.2","6.60"),
  s1 = c("2.10","0.90"),
  m2 = c("139.8","6.40"),
  s2 = c("2.05","0.90"),
  t  = c("3.00","2.40"),
  n  = c(60, 45),
  stringsAsFactors = FALSE
)

prepost_r(
  data = df,
  m1 = m1, s1 = s1,
  m2 = m2, s2 = s2,
  n = n, t = t
)



}
\seealso{
Paired \emph{t} relationships; summary-data meta-analysis for
pre–post designs.
}
